{"ast":null,"code":"import _objectSpread from\"/Users/harshrajput/Documents/code/DietX/myapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/harshrajput/Documents/code/DietX/myapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{useNavigate,Link}from\"react-router-dom\";import background from'./images/bg3.jpg';import formContext from'../context/form/formcontext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var a=useContext(formContext);console.log(a);var _React$useState=React.useState({userid:'',password:''}),_React$useState2=_slicedToArray(_React$useState,2),logincreds=_React$useState2[0],change=_React$useState2[1];var navigate=useNavigate();console.log(logincreds);function handlechange(e){change(function(prev){var temp=_objectSpread({},prev);temp[e.target.name]=e.target.value;return temp;});}function handleclick(e){e.preventDefault();fetch('http://localhost:8000/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({data:logincreds})}).then(function(data){return data.json();}).then(function(data){if(data.success){localStorage.setItem('auth-token',data.authtoken);a.inc(function(prev){return prev+1;});navigate('/user');}});}function handleadmin(e){e.preventDefault();change(function(prev){return _objectSpread(_objectSpread({},prev),{},{admin:true});});}return/*#__PURE__*/_jsx(\"div\",{style:{minheight:'80vh',height:'100vh',margin:'2rem auto'},children:!localStorage.getItem('auth-token')&&/*#__PURE__*/_jsxs(\"form\",{style:{minWidth:'380px',background:'linear-gradient(to bottom right, rgb(30,60,80), rgb(39, 39, 60), orange)',color:'white',maxWidth:'25%',borderRadius:'1rem',padding:'5rem 3rem',marginLeft:'auto',marginRight:'auto',paddingTop:'80px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'300%',textAlign:'center',fontFamily:'sans-serif',fontWeight:'bolder'},children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.85rem',padding:'0',marginBottom:'0.5rem'},htmlFor:\"exampleInputEmail1\",className:\"form-label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{style:{background:'white',border:'none',borderBottom:'solid',borderBlockColor:'lightgrey',borderRadius:'2 rem',color:'lightgrey',paddingTop:'0',paddingLeft:'0',paddingBottom:'0.5rem'},placeholder:\"Type your username\",onChange:handlechange,name:\"userid\",type:\"text\",className:\"form-control\",id:\"exampleInputEmail1\",\"aria-describedby\":\"emailHelp\"}),/*#__PURE__*/_jsx(\"div\",{id:\"emailHelp\",className:\"form-text\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.85rem',padding:'0',marginBottom:'0.5rem'},htmlFor:\"exampleInputPassword1\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{style:{background:'transparent',border:'none',backgroundColor:\"white\",borderBottom:'solid',borderBlockColor:'lightgrey',borderRadius:'0',color:'lightgrey',paddingTop:'0',paddingLeft:'0',paddingBottom:'0.5rem'},placeholder:\"Type your password\",onChange:handlechange,name:\"password\",type:\"password\",className:\"form-control\",id:\"exampleInputPassword1\"})]}),/*#__PURE__*/_jsx(\"button\",{onMouseEnter:function onMouseEnter(e){e.target.style.background='white';e.target.style.color='black';},onMouseLeave:function onMouseLeave(e){e.target.style.background='black';e.target.style.color='white';},style:{background:'black',fontWeight:'bolder',border:'none'},onClick:handleclick,className:\"btn btn-primary\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Haven't registered yet. \",/*#__PURE__*/_jsx(Link,{style:{fontSize:'1rem',padding:'1px 1rem',marginBottom:'0.5rem'},to:'/signup',className:\"btn btn-secondary\",children:\"Signup\"})]})]})||/*#__PURE__*/_jsxs(\"div\",{style:{margin:'10vh 10%',color:'white',fontWeight:'bolder'},children:[\"You have already logged in click \",/*#__PURE__*/_jsx(Link,{style:{color:'white'},to:'/user',children:\"here\"}),\" to go user page or \",/*#__PURE__*/_jsx(Link,{onClick:function onClick(){localStorage.removeItem('auth-token');},style:{color:'white'},children:\"logout\"}),\" to logout\"]})});}","map":{"version":3,"names":["React","useContext","useEffect","useState","useNavigate","Link","background","formContext","Login","a","console","log","userid","password","logincreds","change","navigate","handlechange","e","prev","temp","target","name","value","handleclick","preventDefault","fetch","method","headers","body","JSON","stringify","data","then","json","success","localStorage","setItem","authtoken","inc","handleadmin","admin","minheight","height","margin","getItem","minWidth","color","maxWidth","borderRadius","padding","marginLeft","marginRight","paddingTop","fontSize","textAlign","fontFamily","fontWeight","marginBottom","border","borderBottom","borderBlockColor","paddingLeft","paddingBottom","backgroundColor","style","removeItem"],"sources":["/Users/harshrajput/Documents/code/DietX/myapp/src/component/login.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useNavigate,Link } from \"react-router-dom\";\nimport background from './images/bg3.jpg'\nimport formContext from '../context/form/formcontext';\n\n\n\n\nexport default function Login() {\n\n    \n   \n    const a=useContext(formContext)\n\n    console.log(a)\n\n\n    const [logincreds, change] = React.useState({ userid: '', password: ''})\n\n\n\n    const navigate = useNavigate();\n\n    console.log(logincreds)\n\n    function handlechange(e) {\n\n        change(prev => {\n            let temp = { ...prev }\n            temp[e.target.name] = e.target.value;\n\n            return temp;\n        })\n\n    }\n\n    function handleclick(e) {\n\n        e.preventDefault()\n        fetch('http://localhost:8000/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ data: logincreds })\n        }).then(data => data.json()).then(data => {\n            if (data.success) {\n                localStorage.setItem('auth-token', data.authtoken)\n\n                \n                a.inc(prev=>prev+1)\n                navigate('/user')\n\n            }\n        })\n\n    }\n\n   \n\n    function handleadmin(e) {\n\n        e.preventDefault()\n\n        change(prev => { return ({ ...prev, admin: true }) })\n\n\n\n    }\n\n    \n\n\n\n\n    return (\n        <div style={{ minheight:'80vh',height:'100vh',margin:'2rem auto' }}>\n            {\n                (!localStorage.getItem('auth-token') &&\n                <form style={{ minWidth:'380px',background:'linear-gradient(to bottom right, rgb(30,60,80), rgb(39, 39, 60), orange)',color:'white',maxWidth:'25%',borderRadius:'1rem',padding:'5rem 3rem',marginLeft: 'auto', marginRight: 'auto', paddingTop: '80px' }}>\n                <div style={{ fontSize: '300%', textAlign: 'center', fontFamily: 'sans-serif',fontWeight:'bolder' }}>LOGIN</div>\n                <div className=\"mb-3\">\n                    <label style={{fontSize:'0.85rem',padding:'0',marginBottom:'0.5rem'}} htmlFor=\"exampleInputEmail1\" className=\"form-label\">Username</label>\n                    <input style={{background:'white',border:'none',borderBottom:'solid',borderBlockColor:'lightgrey',borderRadius:'2 rem',color:'lightgrey',paddingTop:'0', paddingLeft:'0',paddingBottom:'0.5rem'}} placeholder='Type your username' onChange={handlechange} name='userid' type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" />\n                    <div id=\"emailHelp\" className=\"form-text\">We'll never share your email with anyone else.</div>\n                </div>\n                <div className=\"mb-3\">\n                    <label style={{fontSize:'0.85rem',padding:'0',marginBottom:'0.5rem'}} htmlFor=\"exampleInputPassword1\" className=\"form-label\">Password</label>\n                    <input style={{background:'transparent',border:'none',backgroundColor:\"white\",borderBottom:'solid',borderBlockColor:'lightgrey',borderRadius:'0',color:'lightgrey',paddingTop:'0', paddingLeft:'0',paddingBottom:'0.5rem'}} placeholder='Type your password' onChange={handlechange} name=\"password\" type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" />\n                </div>\n\n                <button onMouseEnter={(e)=>{\n                    e.target.style.background='white';\n                    e.target.style.color='black'\n                }} onMouseLeave={(e)=>{\n                    e.target.style.background='black'\n                    e.target.style.color='white'\n                }} style={{background:'black',fontWeight:'bolder',border:'none'}} onClick={handleclick} className=\"btn btn-primary\">Submit</button>\n                \n\n                <br />\n                <small >Haven't registered yet. <Link style={{ fontSize: '1rem', padding: '1px 1rem', marginBottom: '0.5rem' }} to={'/signup'} className='btn btn-secondary'>Signup</Link></small>\n            </form>) || <div style={{margin:'10vh 10%',color:'white',fontWeight:'bolder'}}>You have already logged in click <Link style={{color:'white'}} to={'/user'}>here</Link> to go user page or <Link onClick={()=>{localStorage.removeItem('auth-token')}} style={{color:'white'}}>logout</Link> to logout</div>\n            }\n            \n\n\n        </div>\n    )\n}"],"mappings":"qQAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,WAAT,CAAqBC,IAArB,KAAiC,kBAAjC,CACA,MAAOC,WAAP,KAAuB,kBAAvB,CACA,MAAOC,YAAP,KAAwB,6BAAxB,C,wFAKA,cAAe,SAASC,MAAT,EAAiB,CAI5B,GAAMC,EAAC,CAACR,UAAU,CAACM,WAAD,CAAlB,CAEAG,OAAO,CAACC,GAAR,CAAYF,CAAZ,EAGA,oBAA6BT,KAAK,CAACG,QAAN,CAAe,CAAES,MAAM,CAAE,EAAV,CAAcC,QAAQ,CAAE,EAAxB,CAAf,CAA7B,oDAAOC,UAAP,qBAAmBC,MAAnB,qBAIA,GAAMC,SAAQ,CAAGZ,WAAW,EAA5B,CAEAM,OAAO,CAACC,GAAR,CAAYG,UAAZ,EAEA,QAASG,aAAT,CAAsBC,CAAtB,CAAyB,CAErBH,MAAM,CAAC,SAAAI,IAAI,CAAI,CACX,GAAIC,KAAI,kBAAQD,IAAR,CAAR,CACAC,IAAI,CAACF,CAAC,CAACG,MAAF,CAASC,IAAV,CAAJ,CAAsBJ,CAAC,CAACG,MAAF,CAASE,KAA/B,CAEA,MAAOH,KAAP,CACH,CALK,CAAN,CAOH,CAED,QAASI,YAAT,CAAqBN,CAArB,CAAwB,CAEpBA,CAAC,CAACO,cAAF,GACAC,KAAK,CAAC,6BAAD,CAAgC,CACjCC,MAAM,CAAE,MADyB,CAEjCC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFwB,CAKjCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEC,IAAI,CAAElB,UAAR,CAAf,CAL2B,CAAhC,CAAL,CAMGmB,IANH,CAMQ,SAAAD,IAAI,QAAIA,KAAI,CAACE,IAAL,EAAJ,EANZ,EAM6BD,IAN7B,CAMkC,SAAAD,IAAI,CAAI,CACtC,GAAIA,IAAI,CAACG,OAAT,CAAkB,CACdC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCL,IAAI,CAACM,SAAxC,EAGA7B,CAAC,CAAC8B,GAAF,CAAM,SAAApB,IAAI,QAAEA,KAAI,CAAC,CAAP,EAAV,EACAH,QAAQ,CAAC,OAAD,CAAR,CAEH,CACJ,CAfD,EAiBH,CAID,QAASwB,YAAT,CAAqBtB,CAArB,CAAwB,CAEpBA,CAAC,CAACO,cAAF,GAEAV,MAAM,CAAC,SAAAI,IAAI,CAAI,CAAE,sCAAaA,IAAb,MAAmBsB,KAAK,CAAE,IAA1B,GAAmC,CAA9C,CAAN,CAIH,CAOD,mBACI,YAAK,KAAK,CAAE,CAAEC,SAAS,CAAC,MAAZ,CAAmBC,MAAM,CAAC,OAA1B,CAAkCC,MAAM,CAAC,WAAzC,CAAZ,UAES,CAACR,YAAY,CAACS,OAAb,CAAqB,YAArB,CAAD,eACD,cAAM,KAAK,CAAE,CAAEC,QAAQ,CAAC,OAAX,CAAmBxC,UAAU,CAAC,0EAA9B,CAAyGyC,KAAK,CAAC,OAA/G,CAAuHC,QAAQ,CAAC,KAAhI,CAAsIC,YAAY,CAAC,MAAnJ,CAA0JC,OAAO,CAAC,WAAlK,CAA8KC,UAAU,CAAE,MAA1L,CAAkMC,WAAW,CAAE,MAA/M,CAAuNC,UAAU,CAAE,MAAnO,CAAb,wBACA,YAAK,KAAK,CAAE,CAAEC,QAAQ,CAAE,MAAZ,CAAoBC,SAAS,CAAE,QAA/B,CAAyCC,UAAU,CAAE,YAArD,CAAkEC,UAAU,CAAC,QAA7E,CAAZ,mBADA,cAEA,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,KAAK,CAAE,CAACH,QAAQ,CAAC,SAAV,CAAoBJ,OAAO,CAAC,GAA5B,CAAgCQ,YAAY,CAAC,QAA7C,CAAd,CAAsE,OAAO,CAAC,oBAA9E,CAAmG,SAAS,CAAC,YAA7G,sBADJ,cAEI,cAAO,KAAK,CAAE,CAACpD,UAAU,CAAC,OAAZ,CAAoBqD,MAAM,CAAC,MAA3B,CAAkCC,YAAY,CAAC,OAA/C,CAAuDC,gBAAgB,CAAC,WAAxE,CAAoFZ,YAAY,CAAC,OAAjG,CAAyGF,KAAK,CAAC,WAA/G,CAA2HM,UAAU,CAAC,GAAtI,CAA2IS,WAAW,CAAC,GAAvJ,CAA2JC,aAAa,CAAC,QAAzK,CAAd,CAAkM,WAAW,CAAC,oBAA9M,CAAmO,QAAQ,CAAE9C,YAA7O,CAA2P,IAAI,CAAC,QAAhQ,CAAyQ,IAAI,CAAC,MAA9Q,CAAqR,SAAS,CAAC,cAA/R,CAA8S,EAAE,CAAC,oBAAjT,CAAsU,mBAAiB,WAAvV,EAFJ,cAGI,YAAK,EAAE,CAAC,WAAR,CAAoB,SAAS,CAAC,WAA9B,4DAHJ,GAFA,cAOA,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,KAAK,CAAE,CAACqC,QAAQ,CAAC,SAAV,CAAoBJ,OAAO,CAAC,GAA5B,CAAgCQ,YAAY,CAAC,QAA7C,CAAd,CAAsE,OAAO,CAAC,uBAA9E,CAAsG,SAAS,CAAC,YAAhH,sBADJ,cAEI,cAAO,KAAK,CAAE,CAACpD,UAAU,CAAC,aAAZ,CAA0BqD,MAAM,CAAC,MAAjC,CAAwCK,eAAe,CAAC,OAAxD,CAAgEJ,YAAY,CAAC,OAA7E,CAAqFC,gBAAgB,CAAC,WAAtG,CAAkHZ,YAAY,CAAC,GAA/H,CAAmIF,KAAK,CAAC,WAAzI,CAAqJM,UAAU,CAAC,GAAhK,CAAqKS,WAAW,CAAC,GAAjL,CAAqLC,aAAa,CAAC,QAAnM,CAAd,CAA4N,WAAW,CAAC,oBAAxO,CAA6P,QAAQ,CAAE9C,YAAvQ,CAAqR,IAAI,CAAC,UAA1R,CAAqS,IAAI,CAAC,UAA1S,CAAqT,SAAS,CAAC,cAA/T,CAA8U,EAAE,CAAC,uBAAjV,EAFJ,GAPA,cAYA,eAAQ,YAAY,CAAE,sBAACC,CAAD,CAAK,CACvBA,CAAC,CAACG,MAAF,CAAS4C,KAAT,CAAe3D,UAAf,CAA0B,OAA1B,CACAY,CAAC,CAACG,MAAF,CAAS4C,KAAT,CAAelB,KAAf,CAAqB,OAArB,CACH,CAHD,CAGG,YAAY,CAAE,sBAAC7B,CAAD,CAAK,CAClBA,CAAC,CAACG,MAAF,CAAS4C,KAAT,CAAe3D,UAAf,CAA0B,OAA1B,CACAY,CAAC,CAACG,MAAF,CAAS4C,KAAT,CAAelB,KAAf,CAAqB,OAArB,CACH,CAND,CAMG,KAAK,CAAE,CAACzC,UAAU,CAAC,OAAZ,CAAoBmD,UAAU,CAAC,QAA/B,CAAwCE,MAAM,CAAC,MAA/C,CANV,CAMkE,OAAO,CAAEnC,WAN3E,CAMwF,SAAS,CAAC,iBANlG,oBAZA,cAqBA,aArBA,cAsBA,iEAAgC,KAAC,IAAD,EAAM,KAAK,CAAE,CAAE8B,QAAQ,CAAE,MAAZ,CAAoBJ,OAAO,CAAE,UAA7B,CAAyCQ,YAAY,CAAE,QAAvD,CAAb,CAAgF,EAAE,CAAE,SAApF,CAA+F,SAAS,CAAC,mBAAzG,oBAAhC,GAtBA,GADA,eAwBQ,aAAK,KAAK,CAAE,CAACd,MAAM,CAAC,UAAR,CAAmBG,KAAK,CAAC,OAAzB,CAAiCU,UAAU,CAAC,QAA5C,CAAZ,4DAAoG,KAAC,IAAD,EAAM,KAAK,CAAE,CAACV,KAAK,CAAC,OAAP,CAAb,CAA8B,EAAE,CAAE,OAAlC,kBAApG,qCAA8K,KAAC,IAAD,EAAM,OAAO,CAAE,kBAAI,CAACX,YAAY,CAAC8B,UAAb,CAAwB,YAAxB,EAAsC,CAA1D,CAA4D,KAAK,CAAE,CAACnB,KAAK,CAAC,OAAP,CAAnE,oBAA9K,gBA1BhB,EADJ,CAkCH"},"metadata":{},"sourceType":"module"}